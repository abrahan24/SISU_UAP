<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <title>INFORMACION</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="Premium Multipurpose Admin & Dashboard Template" name="description" />
    <meta content="Themesdesign" name="author" />
    <!-- App favicon -->
    <link rel="shortcut icon" href="assets/images/logoS.png">

    <!-- DataTables -->
    <link href="../../../../assets/libs/datatables.net-bs4/css/dataTables.bootstrap4.min.css" rel="stylesheet"
        type="text/css" />
    <link href="../../../../assets/libs/datatables.net-buttons-bs4/css/buttons.bootstrap4.min.css" rel="stylesheet"
        type="text/css" />


    <!-- Responsive datatable examples -->
    <link href="../../../../assets/libs/datatables.net-responsive-bs4/css/responsive.bootstrap4.min.css"
        rel="stylesheet" type="text/css" />

    <link href="../../../../assets/libs/alertifyjs/build/css/alertify.min.css" rel="stylesheet" type="text/css" />
    <link href="../../../../assets/libs/alertifyjs/build/css/themes/default.min.css" rel="stylesheet" type="text/css" />

    <!-- Bootstrap Css -->
    <link href="../../../../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!-- Icons Css -->
    <link href="../../../../assets/css/icons.min.css" rel="stylesheet" type="text/css" />
    <!-- App Css-->
    <link href="../../../../assets/css/app.min.css" rel="stylesheet" type="text/css" />

    <link href="../../../../assets/css/style.css" rel="stylesheet" type="text/css" />

    <link rel="stylesheet" href="https://unicons.iconscout.com/release/v4.0.8/css/line.css">


    <!-- Selectize -->
    <link href="assets/libs/selectize/css/selectize.css" rel="stylesheet" type="text/css" />

    <!-- spectrum colorpicker -->
    <link href="assets/libs/spectrum-colorpicker/spectrum.css" rel="stylesheet" type="text/css" />

    <!-- datepicker -->
    <link href="assets/libs/air-datepicker/css/datepicker.min.css" rel="stylesheet" type="text/css" />

    <link href="assets/libs/bootstrap-touchspin/jquery.bootstrap-touchspin.min.css" rel="stylesheet" />
    

</head>

<body>
   
    <div class="account-pages my-5 pt-sm-1">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-6">
                    <div class="text-center">
                      
                        <div style="max-width: 100%; overflow: hidden; text-align: center;">
                            <img src="assets/images/titulo_sisu.png" style="width: 100%; max-width: 450px; height: auto;" alt="titulo_sisu">
                        </div>
                    </div>
                </div>
            </div>
            <br>
            <div class="row justify-content-center">
                <!-- INICIO INFORMACION ADMINISTRATIVO -->
                <div class="col-xl-8 col-sm-10">
                    <div class="card bg-light">
                        <div class="card-header bg-danger text-center">
                            <h2 class="text-white">Datos Personales</h2>
                        </div>
                        <div class="card-body p-4">
                            <form id="form1" action="/generarFichaA" method="post">
                                <input type="hidden" id="codigoAdministrativo" name="codigoAdministrativo" value="${codigoAdministrativo}" />
                                <div class="row">
                                    <div class="col-md-4 mb-3">
                                        <label for="nombreAdministrativo">Nombre del Administrativo:</label>
                                        <input type="text" class="form-control" th:value="${nombres}" readonly>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="apPaternoA">Apellido Paterno</label>
                                        <input type="text" id="apPaternoA" name="apPaternoA" class="form-control" th:value="${apPaterno}" readonly>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="apMaternoA">Apellido Materno</label>
                                        <input type="text" id="apMaternoA" name="apMaternoA" class="form-control" th:value="${apMaterno}" readonly>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4 mb-3">
                                        <label for="ci">CI:</label>
                                        <input type="text" id="ci" name="ci" class="form-control" th:value="${ci}" readonly>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="CA">Codigo Administrativo:</label>
                                        <input type="text" id="CA" name="CA" class="form-control" th:value="${CA}" readonly>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="fechaNacimientoA">Fecha de Nacimiento:</label>
                                        <input type="text" id="fechaNacimientoA" name="fechaNacimientoA" class="form-control" th:value="${fechaNacimientoA}" readonly>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4 mb-3">
                                        <label for="sexoA">Sexo:</label>
                                        <input type="text" id="sexoA" name="sexoA" class="form-control" th:value="${sexoA}" readonly>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="gmailA">Correo:</label>
                                        <input type="text" id="gmailA" name="gmailA" class="form-control" th:value="${gmailA}" readonly>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="descripcionA">Descripcion:</label>
                                        <input type="text" id="descripcionA" name="descripcionA" class="form-control" th:value="${descripcionA}" readonly>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="descripcionA2">Descripcion2:</label>
                                        <input type="text" id="descripcionA2" name="descripcionA2" class="form-control" th:value="${descripcionA2}" readonly>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <label for="nivel">Nivel:</label>
                                        <input type="text" id="nivel" name="nivel" class="form-control" th:value="${nivel}" readonly>
                                    </div>
                                </div>
                                <div class="form-group row mt-3">
                                    <label class="col-md-4 col-form-label">Seleccionar Servicio Requerido</label>
                                    <div class="col-md-8">
                                        <select class="form-control" name="servicio" required>
                                            <option value="">Elegir..</option>
                                            <th:block th:each="ser: ${servicios}" th:if="${ser.estado != 'X'}">
                                                <option th:value="${ser.idServicioMedico}" th:text="${ser.servicio.servicios}"></option>
                                            </th:block>
                                        </select>
                                    </div>
                                </div>
                                <br>
                                <div class="row">
                                    <div class="col-md-6">
                                        <a class="btn btn-secondary btn-block" href="../../../inicioCliente">Cancelar</a>
                                    </div>
                         
                                    <div class="col-md-6">
                                        <button type="submit" class="btn btn-success btn-block">Generar Ficha</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <!-- FIN INFORMACION ADMINISTRATIVO -->
            </div>
        </div>
    </div>
    <!-- end Account pages -->

    <!-- JAVASCRIPT -->
    <script src="../../../../assets/libs/jquery/jquery.min.js"></script>
    <script src="../../../../assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="../../../../assets/libs/metismenu/metisMenu.min.js"></script>
    <script src="../../../../assets/libs/simplebar/simplebar.min.js"></script>
    <script src="../../../../assets/libs/node-waves/waves.min.js"></script>

    <script src="https://unicons.iconscout.com/release/v2.0.1/script/monochrome/bundle.js"></script>

    <!-- Required datatable js -->
    <script src="../../../../assets/libs/datatables.net/js/jquery.dataTables.min.js"></script>
    <script src="../../../../assets/libs/datatables.net-bs4/js/dataTables.bootstrap4.min.js"></script>

    <!-- Buttons examples -->
    <script src="../../../../assets/libs/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
    <script src="../../../../assets/libs/datatables.net-buttons-bs4/js/buttons.bootstrap4.min.js"></script>
    <script src="../../../../assets/libs/jszip/jszip.min.js"></script>
    <script src="../../../../assets/libs/pdfmake/build/pdfmake.min.js"></script>
    <script src="../../../../assets/libs/pdfmake/build/vfs_fonts.js"></script>
    <script src="../../../../assets/libs/datatables.net-buttons/js/buttons.html5.min.js"></script>
    <script src="../../../../assets/libs/datatables.net-buttons/js/buttons.print.min.js"></script>
    <script src="../../../../assets/libs/datatables.net-buttons/js/buttons.colVis.min.js"></script>
    <!-- Responsive examples -->
    <script src="../../../../assets/libs/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
    <script src="../../../../assets/libs/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js"></script>

    <!-- Datatable init js -->
    <script src="../../../../assets/js/pages/datatables.init.js"></script>

    <!-- alert -->
    <script src="../../../../assets/libs/alertifyjs/build/alertify.min.js"></script>
    <script src="../../../../assets/js/pages/alertifyjs.init.js"></script>

    <script src="../../../../assets/js/pages/vistaPass.js"></script>
    <script src="../../../../assets/js/pages/calendario.js"></script>
    <script src="../../../../assets/js/pages/data.js"></script>


    <!-- parsleyjs -->
    <script src="../../../../assets/libs/parsleyjs/parsley.min.js"></script>
    <!-- validation init -->
    <script src="../../../../assets/js/pages/form-validation.init.js"></script>

    <!-- modal-->
    <script src="../../../../assets/js/pages/modalLiname.js"></script>


    <!-- Spectrum colorpicker -->
    <script src="assets/libs/spectrum-colorpicker/spectrum.js"></script>

    <!-- Selectize -->
    <script src="assets/libs/selectize/js/standalone/selectize.min.js"></script>

    <!-- datepicker -->
    <script src="assets/libs/air-datepicker/js/datepicker.min.js"></script>
    <script src="assets/libs/air-datepicker/js/i18n/datepicker.en.js"></script>

    <script src="assets/libs/bootstrap-touchspin/jquery.bootstrap-touchspin.min.js"></script>
    <script src="assets/libs/bootstrap-maxlength/bootstrap-maxlength.min.js"></script>

    <!-- Form Advanced init -->
    <script src="assets/js/pages/form-advanced.init.js"></script>

    <script src="assets/js/app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        $(document).ready(function () {
            $('#form1').submit(function (event) {
                event.preventDefault();
                var form = document.getElementById("form1");
                var action = form.action;
                var formData = $(this).serialize();
    
                $.ajax({
                    type: 'POST',
                    url: $(this).attr('action'),
                    data: formData,
                    contentType: 'application/x-www-form-urlencoded',
                    success: function (response) {
                        var mensaje = response;
                        if (mensaje === "exito") {
                            Swal.fire({
                                title: 'Se Registro la Ficha con Exitoso!',
                                icon: "success",
                                showConfirmButton: false,
                                timer: 1500
                            });
                            setTimeout(function () {
                                location.href = "../../../../inicioCliente";
                            }, 2000);
                        } else if (mensaje === "error") {
                            Swal.fire({
                                title: 'No está habilitado para generar Fichas, debe apersonarse a SISU y verificar sus datos',
                                icon: "warning",
                                showConfirmButton: false,
                                timer: 1500
                            });
                            setTimeout(function () {
                                location.href = "../../../../inicioCliente";
                            }, 2000);
                        } else if (mensaje === "error1") {
                            Swal.fire({
                                title: 'Usted ya tiene una ficha en la fecha actual',
                                icon: "warning",
                                showConfirmButton: false,
                                timer: 1500
                            });
                            setTimeout(function () {
                                location.href = "../../../../inicioCliente";
                            }, 2000);
                        } else if (mensaje === "error2") {
                            Swal.fire({
                                title: 'Limite de Fichas para este Servicio está al máximo, Por favor Solicite su Ficha en otro Momento',
                                icon: "warning",
                                showConfirmButton: false,
                                timer: 3000
                            });
                            setTimeout(function () {
                                location.href = "../../../../inicioCliente";
                            }, 3000);
                        }
                    },
                    error: function (xhr, status, error) {
                        toastr.error('Ha ocurrido un error. Por favor, intenta nuevamente.');
                        console.error(error);
                    }
                });
            });
        });
    </script>
    
    

</body>

</html>