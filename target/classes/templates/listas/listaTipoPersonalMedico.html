<!doctype html>
<html lang="en" th:if="${tablaRecarga == null}">

<head>
    <meta charset="utf-8" />
    <title>Tipo Personal Médico | SISU</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta content="Premium Multipurpose Admin & Dashboard Template" name="description" />
    <meta content="Themesdesign" name="author" />
    <!-- App favicon -->
    <link rel="shortcut icon" href="../../../../assets/images/logoS.png">

    <!-- DataTables -->
    <link href="../../../../assets/libs/datatables.net-bs4/css/dataTables.bootstrap4.min.css" rel="stylesheet"
        type="text/css" />
    <link href="../../../../assets/libs/datatables.net-buttons-bs4/css/buttons.bootstrap4.min.css" rel="stylesheet"
        type="text/css" />

    <!-- Responsive datatable examples -->
    <link href="../../../../assets/libs/datatables.net-responsive-bs4/css/responsive.bootstrap4.min.css"
        rel="stylesheet" type="text/css" />

    <link href="../../../../assets/libs/alertifyjs/build/css/alertify.min.css" rel="stylesheet" type="text/css" />
    <link href="../../../../assets/libs/alertifyjs/build/css/themes/default.min.css" rel="stylesheet" type="text/css" />

    <!-- Bootstrap Css -->
    <link href="../../../../assets/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!-- Icons Css -->
    <link href="../../../../assets/css/icons.min.css" rel="stylesheet" type="text/css" />
    <!-- App Css-->
    <link href="../../../../assets/css/app.min.css" rel="stylesheet" type="text/css" />

    <link rel="stylesheet" href="../../../../icono_fontawesome6.4.0/css/all.css">
    <link rel="stylesheet" href="../../../../icono_fontawesome6.4.0/css/fontawesome.pro.min.css">
    <link rel="stylesheet" href="../../../../assets/css/select2 4.1.css">
    <link rel="stylesheet" href="../../../../assets/css/sweetaler2.css">
</head>

<body data-topbar="colored">

    <div id="layout-wrapper">

        <div th:insert="~{layout/topbar :: topbar}"></div>
        <div class="vertical-menu">
            <div th:insert="~{layout/sidebar :: sidebar}"></div>
        </div>
        <div class="main-content">
            <div class="page-content">

                <!-- Page-Title -->
                <div class="page-title-box">
                    <div class="container-fluid">
                        <div class="row align-items-center">
                            <div class="col-md-8">
                                <h4 class="page-title mb-1">Tipo Personal Médico</h4>
                                <ol class="breadcrumb m-0">
                                    <li class="breadcrumb-item"><a href="javascript: void(0);">Tabla de Registros</a>
                                    </li>
                                    <li class="breadcrumb-item active">Datos de Tipo Personal Médico</li>
                                </ol>
                            </div>
                            <div class="col-md-4">
                                <div class="float-right d-none d-md-block">
                                    <div class="dropdown">
                                        <button class="btn btn-light btn-rounded dropdown-toggle" type="button"
                                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <i class="mdi mdi-settings-outline mr-1"></i> Settings
                                        </button>
                                        <div class="dropdown-menu dropdown-menu-right dropdown-menu-animated">
                                            <a class="dropdown-item" href="#">Action</a>
                                            <a class="dropdown-item" href="#">Another action</a>
                                            <a class="dropdown-item" href="#">Something else here</a>
                                            <div class="dropdown-divider"></div>
                                            <a class="dropdown-item" href="#">Separated link</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                <div class="page-content-wrapper">
                    <div class="container-fluid">
                        <div class="row">
                            <div class="col-12">
                                <div class="card">
                                    <div class="card-body">
                                        <h4 class="header-title">Buttons example</h4>

                                        <p class="card-title-desc">The Buttons extension for DataTables</p>
                                        <div class="text-right mb-3">
                                            <a type="button" style="color: white;"
                                                class="btn btn-primary btn-sm waves-effect waves-light"
                                                data-toggle="modal" data-target="#formRecetaModal"
                                                onclick="AbrirFormularioRegistro()"><i
                                                    class="fa-solid fa-file-circle-plus"></i>
                                                Registrar Tipo Registro Médico</a>
                                        </div>
                                        <div id="seccionTabla">

                                        </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
        <div th:insert="~{layout/footer :: footer}"></div>
    </div>
    </div>
    <!-- Modal -->
    <div class="modal fade" id="formRecetaModal" tabindex="-1" role="dialog" aria-labelledby="formRecetaModal"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="formRecetaModal">Registrar Nuevo Tipo Personal Médico</h5>
                    <a type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </a>
                </div>
                <div class="modal-body" id="VentanaForm">
                </div>
            </div>
        </div>
    </div>
    <!--<div class="modal fade" id="formModificarRecetaModal" tabindex="-1" role="dialog"
        aria-labelledby="formModificarRecetaModal" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Modificar Receta Remedio</h5>
                    <a type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </a>
                </div>
                <div class="modal-body" id="vetanaFormModificarRecetaModal">
                </div>
            </div>
        </div>
    </div>-->
    <div th:insert="~{layout/right-sidebar :: right-sidebar}"></div>
    <div class="rightbar-overlay"></div>

    <!-- JAVASCRIPT -->
    <!-- <script src="../../../../assets/libs/jquery/jquery.min.js"></script> -->
    <script src="../../../../assets/js/pages/jquery-3.7.0.min.js"></script>

    <script>
        CargarTabla();
        function AbrirFormularioRegistro() {
            $.ajax({
                type: 'POST',
                url: "/VentanaFormTipoPersonalMedicoModal",
                success: function (response) {
                    $("#VentanaForm").html(response);
                }
            });
        }

        function CargarTabla() {
            $.ajax({
                type: 'POST',
                url: "/CargarTablaTipoPersonalMedico",
                success: function (response) {
                    $("#seccionTabla").html(response);
                }
            });
        }

        function EliminarRegistro(id) {
            Swal.fire({
                title: 'Eliminar?',
                text: "Estas Segurgo que deseas Eliminar el registro de este Tipo Personal Medico?",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Si, eliminar!'
            }).then((result) => {
                if (result.isConfirmed) {
                    Swal.fire({
                        title: 'Eliminando...',
                        allowOutsideClick: false,
                        timerProgressBar: true,
                        didOpen: () => {
                            Swal.showLoading()
                        }
                    });
                    $.ajax({
                        type: 'POST',
                        url: "/EliminarTipoPersonalMedico/" + id,
                        success: function () {
                            CargarTabla();
                            Swal.close();
                            Swal.fire(
                                'Eliminado!',
                                'Se ha eliminado el Registro Correctamente.',
                                'success'
                            )
                        }
                    });
                }
            })
        }

        function ModificarRegistro(id) {
            $.ajax({
                type: 'POST',
                url: "/VentanaEditFormTipoPersonalMedicoModal/" + id,
                success: function (response) {
                    //$("#vetanaFormRecetaRemedioModal").html(response);
                    $("#VentanaForm").html(response);
                }
            });
        }

        document.addEventListener("DOMContentLoaded", function () {
            // Selecciona el formulario por su id
            const form = document.getElementById("miFormulario");

            form.addEventListener("submit", function (event) {
                let isValid = true; // Variable para rastrear la validez del formulario

                // Obtén todos los campos obligatorios (los que tienen el atributo "required")
                const requiredFields = form.querySelectorAll("[required]");

                requiredFields.forEach(function (field) {
                    if (!field.value) {
                        // Si un campo obligatorio está vacío, muestra un mensaje de error
                        isValid = false;
                        field.classList.add("is-invalid");
                    } else {
                        field.classList.remove("is-invalid");
                    }
                });

                if (!isValid) {
                    // Si el formulario no es válido, evita que se envíe
                    event.preventDefault();
                }
            });
        });

    </script>


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="../../../../assets/libs/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="../../../../assets/libs/metismenu/metisMenu.min.js"></script>
    <script src="../../../../assets/libs/simplebar/simplebar.min.js"></script>
    <script src="../../../../assets/libs/node-waves/waves.min.js"></script>
    <script src="https://unicons.iconscout.com/release/v2.0.1/script/monochrome/bundle.js"></script>

    <!-- Required datatable js -->
    <script src="../../../../assets/libs/datatables.net/js/jquery.dataTables.min.js"></script>
    <script src="../../../../assets/libs/datatables.net-bs4/js/dataTables.bootstrap4.min.js"></script>

    <!-- Buttons examples -->
    <script src="../../../../assets/libs/datatables.net-buttons/js/dataTables.buttons.min.js"></script>
    <script src="../../../../assets/libs/datatables.net-buttons-bs4/js/buttons.bootstrap4.min.js"></script>
    <script src="../../../../assets/libs/jszip/jszip.min.js"></script>
    <script src="../../../../assets/libs/pdfmake/build/pdfmake.min.js"></script>
    <script src="../../../../assets/libs/pdfmake/build/vfs_fonts.js"></script>
    <script src="../../../../assets/libs/datatables.net-buttons/js/buttons.html5.min.js"></script>
    <script src="../../../../assets/libs/datatables.net-buttons/js/buttons.print.min.js"></script>
    <script src="../../../../assets/libs/datatables.net-buttons/js/buttons.colVis.min.js"></script>
    <!-- Responsive examples -->
    <script src="../../../../assets/libs/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
    <script src="../../../../assets/libs/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js"></script>

    <!-- alert -->
    <script src="../../../../assets/libs/alertifyjs/build/alertify.min.js"></script>
    <script src="../../../../assets/js/pages/alertifyjs.init.js"></script>
    <script src="../../../../assets/libs/icono_fontawesome6.4.0/js/all.js"></script>
    <script src="../../../../assets/libs/icono_fontawesome6.4.0/js/all.min.js"></script>
    <script src="../../../../assets/js/pages/dayjs.min.js"></script>
    <script src="../../../../assets/js/pages/datepicker-bs4.js"></script>
    <script src="../../../../assets/js/pages/swallAlert2.js"></script>


    <script src="../../../../assets/js/app.js"></script>
    <script src="../../../../assets/js/pages/select2 4.1.js"></script>
</body>

</html>
<th:block th:if="${tablaRecarga != null}">
    <table id="datatable-buttons" class="table table-striped table-bordered dt-responsive nowrap botonesH"
        style="border-collapse: collapse; border-spacing: 0; width: 100%;">
        <thead>
            <tr>
                <th class="text-center">#</th>
                <th class="text-center">Nombre Tipo Personal Médico </th>
                <th class="text-center">Descripción</th>
                <th class="text-center">Opciones</th>
            </tr>
        </thead>
        <tbody>
            <th:block th:each="tpm, rowStat : ${listaTipoPersonalMedico}" th:if="${tpm.estado !='X'}">
                <tr th:id="${'fila'+tpm.idTipoPersonalMedico}">
                    <td class="text-center" th:text="${rowStat.count}"></td>
                    <td class="text-center" th:text="${tpm.tipoPersonal}"></td>
                    <td class="text-center" th:text="${tpm.descripcion}">
                    </td>
                    <td class="text-center">
                        <div class="btn-group">
                            <a class="btn btn-info" type="button" style="color: aliceblue;"
                            data-toggle="modal" data-target="#formRecetaModal"
                                th:attr="onclick='ModificarRegistro(\'' + ${tpm.idTipoPersonalMedico} + '\')'">
                                <li class="fas fa-pencil-alt"></li>
                            </a>
                            <a class="btn btn-danger" type="button" style="color: aliceblue;"
                                th:attr="onclick='EliminarRegistro(\'' + ${tpm.idTipoPersonalMedico} + '\')'">
                                <li class="fa-solid fa-trash"></li>
                            </a>
                        </div>
                    </td>
                </tr>
            </th:block>
        </tbody>
    </table>
    <script src="../../../../assets/js/pages/datatables.init.js"></script>
</th:block>